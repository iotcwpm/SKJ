# Indian Ocean skipjack tuna model

The Indian Ocean Tuna Commission's (IOTC) Working Party on Methods' (WPM) simulation model of the Indian Ocean skipjack (SKJ) tuna fishery for the evaluation of management procedures (MP).

> ![](http://www.iotc.org/sites/default/files/documents/science/Katsuwonus_pelamis-main.jpg)

> Skipjack tuna (_Katsuwonus pelamis_)

## Documentation

The following document the model structure and code,

- [model/description](http://iotcwpm.github.io/SKJ/model/description) : a description of the model, including equations
- [parameters/description](http://iotcwpm.github.io/SKJ/parameters/description) : a description of the parameter priors and how they were derived
- [procedures/description](http://iotcwpm.github.io/SKJ/procedures/description) : a description of the candidate management procedures
- [doxygen](http://iotcwpm.github.io/SKJ/doxygen) : C++ code documentation generated by Doxygen

The following are based on model outputs (and should be updated after each model run; see below),

- [model/display](http://iotcwpm.github.io/SKJ/model/display) : model structure and variables (e.g. ogives, biomass trajectories)
- [data/display](http://iotcwpm.github.io/SKJ/data/display) : model fits to observed data (e.g. CPUE, size frequencies)
- [yield/display](http://iotcwpm.github.io/SKJ/yield/display) : yield curve and MSY calculations
- [feasible/display](http://iotcwpm.github.io/SKJ/feasible/display) : results from conditioning using the FST algorithm
- [ss3/display](http://iotcwpm.github.io/SKJ/ss3/display) : summarise of parameters obtained from the SS3 based stock assessment grid
- [evaluate/display](http://iotcwpm.github.io/SKJ/evaluate/display) : results from evaluations of management procedures

## Status

The model is still under active development. As the model matures we hope to make it available as precompiled executables for Windows and Linux and/or a package for R.


## Usage

To build the executable `ioskj.exe` run,

```
make exec
```

To run the executable supply a task name and, for certain tasks, additional arguments,

```
./ioskj.exe <task> [<arg1>],[<arg2>]...
```

Tasks include,

- `run`
- `priors`
- `feasible <trials>`
- `evaluate <replicates>`

For example, to evaluate the defined set of management procedures using 1000 replicates run,

```
./ioskj.exe evaluate 1000
```

To build a debug version of the executable for use with [GDB](http://www.gnu.org/software/gdb/) run,

```
make debug
```

To update all documentation run,

```
make docs
```

To publish documentation to http://iotcwpm.github.io/SKJ run,

```
make publish
```

## Organisation

The C++ code is divided into several files:

- `imports.hpp` - `#include`s to import classes and functions from external libraries
- `dimensions.hpp` - defines the dimensions used in various model arrays e.g. `Region`, `Age`, `Method`
- `model.hpp` - contains the `Model` class which specifies the structure and dynamics of the fishery
- `parameters.hpp` - contains the `Parameters` class which defines the parameters and their priors used for model conditioning
- `data.hpp` - contains the `Data` class which defines the data sets and their likelihoods used for model conditioning
- `ioskj.cpp` - the primary C++ file for compiling the executable
- `tests.cpp` - unit tests of the C++ code

Some of these files have corresponding folders,

- `parameters` : R scripts for background analyses for developing model prior probability distributions.
- `data` : R and Python scripts for processing source data. See the documentation in those files for more details.

In addition there is a folder related to documentation,

- `doxygen` : a Doxygen project for automatically generating documentation from C++ source code.
