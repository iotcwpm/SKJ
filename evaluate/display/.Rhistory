source('../../common.R',local=T)
load(c(
'procedures','samples',
'performances',
'track'
),from='../output')
perfs <- merge(procedures,
ddply(performances,.(procedure),summarise,
catches_total = mean(catches_total),
catches_mapc = mean(catches_mapc),
status_mean = mean(status_mean),
status_b10 = mean(status_b10),
status_b20 = mean(status_b20)
)
)
track <- within(track,{
procedure <- factor(procedure)
})
ggplot(subset(track,replicate<4),aes(x=year+quarter/4,y=catches_total)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Total catch")
load(c(
'procedures','samples',
'performances',
'track'
),from='../output')
perfs <- merge(procedures,
ddply(performances,.(procedure),summarise,
catches_total = mean(catches_total),
catches_mapc = mean(catches_mapc),
status_mean = mean(status_mean),
status_b10 = mean(status_b10),
status_b20 = mean(status_b20)
)
)
track <- within(track,{
procedure <- factor(procedure)
})
ggplot(subset(track,replicate<4),aes(x=year+quarter/4,y=catches_total)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Total catch")
ggplot(subset(track,replicate<10 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Total catch")
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)")
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
opts(legend.position='none')
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
theme(legend.position='none')
ggplot(perfs,aes(x=catches_total/1000,y=1-status_b20)) +
geom_point(aes(colour=class)) +
geom_vline(x=0,alpha=0) +
geom_hline(y=0,alpha=0) +
labs(x="Yield (mean total catch, `000 t)",y="Safety (P(B>20%B0))")
ggplot(subset(perfs,class="BRule"),aes(x=catches_total/1000,y=1-status_b20)) +
geom_point(aes(colour=factor(p2),shape=factor(p3))) +
geom_vline(x=0,alpha=0) +
geom_hline(y=0,alpha=0) +
labs(x="Yield (mean total catch, `000 t)",y="Safety (P(B>20%B0))")
ggplot(subset(perfs,class=="BRule"),aes(x=catches_total/1000,y=1-status_b20)) +
geom_point(aes(colour=factor(p2),shape=factor(p3))) +
geom_vline(x=0,alpha=0) +
geom_hline(y=0,alpha=0) +
labs(x="Yield (mean total catch, `000 t)",y="Safety (P(B>20%B0))")
ggplot(subset(perfs,class=="BRule"),aes(x=catches_total/1000,y=1-status_b20)) +
geom_point(aes(colour=factor(p2),shape=factor(p3))) +
labs(x="Yield (mean total catch, `000 t)",y="Safety (P(B>20%B0))")
colour = list(p2='Target')
shape = list(p3='Limit')
names(colour)[1]
=colour[[1]]
colour[[1]]
data <- subset(perfs,class=="BRule")
.(catches_total,1-status_b20)
perfs <- merge(procedures,
ddply(performances,.(procedure),summarise,
yield = mean(catches_total)/1000*4,
stability = -mean(catches_mapc),
status = mean(status_mean),
safety10 = 1-mean(status_b10),
safety20 = 1-mean(status_b20)
)
)
x = list(yield='Yield')
y = list(saefty20='Safety')
colour = list(p2='Target')
shape = list(p3='Limit')
data <- subset(perfs,class=="BRule")
data <- within(data,{
x = temp[,names(x)
y = temp[,names(y)
colour = factor(temp[,names(colour)),
shape = factor(temp[,names(shape))
})
data <- within(data,{
x = temp[,names(x)],
y = temp[,names(y)],
colour = factor(temp[,names(colour)]),
shape = factor(temp[,names(shape)])
})
data <- within(data,{
x = data[,names(x)],
y = data[,names(y)],
colour = factor(data[,names(colour)]),
shape = factor(data[,names(shape)])
})
data <- within(data,{
x = data[,names(x)]
y = data[,names(y)]
colour = factor(data[,names(colour)])
shape = factor(data[,names(shape)])
})
names(x)
data <- subset(perfs,class=="BRule")
data
head(data)
data <- within(data,{
x = data[,names(x)]
y = data[,names(y)]
colour = factor(data[,names(colour)])
shape = factor(data[,names(shape)])
})
data[,names(x)]
data[,names(y)]
y = list(safety20='Safety')
data <- within(data,{
x = data[,names(x)]
y = data[,names(y)]
colour = factor(data[,names(colour)])
shape = factor(data[,names(shape)])
})
data[,names(y)]
data[,names(colour)]
data[,names(shape)]
shape = list(p3='Limit')
factor(data[,names(shape)])
x = list(yield='Yield')
y = list(safety20='Safety')
colour = list(p2='Target')
shape = list(p3='Limit')
data <- subset(perfs,class=="BRule")
data <- within(data,{
x = data[,names(x)]
y = data[,names(y)]
colour = factor(data[,names(colour)])
shape = factor(data[,names(shape)])
})
print(
ggplot(data,aes(x=x,y=y,colour=colour,shape=shape)) +
geom_point(size=3,alpha=0.5) +
geom_vline(x=0,alpha=0) +
geom_hline(y=0,alpha=0) +
scale_shape_manual(values=1:10) +
labs(x="Yield (mean annual catch, `000 t)",y="Safety (P(B>20%B0))",colour=colour[[1]])
)
plot_tradeoff <- function(data,x,y,colour,shape){
data <- within(data,{
x = data[,names(x)]
y = data[,names(y)]
colour = factor(data[,names(colour)])
shape = factor(data[,names(shape)])
})
print(
ggplot(data,aes(x=x,y=y,colour=colour,shape=shape)) +
geom_point(size=3,alpha=0.7) +
geom_vline(x=0,alpha=0) +
geom_hline(y=0,alpha=0) +
scale_shape_manual(values=1:10) +
labs(x=x[[1]],y=y[[1]],colour=colour[[1]],shape=shape[[1]])
)
}
plot_tradeoff(
subset(perfs,class=="BRule"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(safety20='Safety P(B>20%B0)'),
colour = list(p2='Target'),
shape = list(p3='Limit')
)
plot_tradeoff(
perfs,
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(safety20='Safety P(B>20%B0)'),
colour = list(p2='Target'),
shape = list(p3='Limit')
)
plot_tradeoff(
perfs,
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(safety20='Safety P(B>20%B0)'),
colour = list(class='Class'),
shape = list(class='Class')
)
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
theme(legend.position='none')
load(c(
'procedures','samples',
'performances',
'track'
),from='../output')
perfs <- merge(procedures,
ddply(performances,.(procedure),summarise,
yield = mean(catches_total)/1000*4,
stability = -mean(catches_mapc),
status = mean(status_mean),
safety10 = 1-mean(status_b10),
safety20 = 1-mean(status_b20)
)
)
track <- within(track,{
procedure <- factor(procedure)
})
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
theme(legend.position='none')
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=catches_total)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
theme(legend.position='none')
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=catches_total*4/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Catches (mil. t)") +
theme(legend.position='none')
ggplot(subset(track,replicate<4),aes(x=year+quarter/4,y=catches_total*4/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Catches (mil. t)") +
theme(legend.position='none')
View(track)
subset(track,year==2015 & quarter==0)
subset(track,year==2015 & quarter==0 & replicate==1)
subset(track,year==2015 & quarter==1 & replicate==1)
load(c(
'procedures','samples',
'performances',
'track'
),from='../output')
perfs <- merge(procedures,
ddply(performances,.(procedure),summarise,
yield = mean(catches_total)/1000*4,
stability = -mean(catches_mapc),
status = mean(status_mean),
safety10 = 1-mean(status_b10),
safety20 = 1-mean(status_b20)
)
)
track <- within(track,{
procedure <- factor(procedure)
})
plot_tradeoff <- function(data,x,y,colour,shape){
data <- within(data,{
x = data[,names(x)]
y = data[,names(y)]
colour = factor(data[,names(colour)])
shape = factor(data[,names(shape)])
})
print(
ggplot(data,aes(x=x,y=y,colour=colour,shape=shape)) +
geom_point(size=3,alpha=0.7) +
geom_vline(x=0,alpha=0) +
geom_hline(y=0,alpha=0) +
scale_shape_manual(values=1:10) +
labs(x=x[[1]],y=y[[1]],colour=colour[[1]],shape=shape[[1]])
)
}
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
theme(legend.position='none')
ggplot(subset(track,replicate<4),aes(x=year+quarter/4,y=catches_total*4/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Catches (mil. t)") +
theme(legend.position='none')
load(c(
'procedures','samples',
'performances',
'track'
),from='../output')
perfs <- merge(procedures,
ddply(performances,.(procedure),summarise,
yield = mean(catches_total)/1000*4,
stability = -mean(catches_mapc),
status = mean(status_mean),
safety10 = 1-mean(status_b10),
safety20 = 1-mean(status_b20)
)
)
track <- within(track,{
procedure <- factor(procedure)
})
plot_tradeoff <- function(data,x,y,colour,shape){
data <- within(data,{
x = data[,names(x)]
y = data[,names(y)]
colour = factor(data[,names(colour)])
shape = factor(data[,names(shape)])
})
print(
ggplot(data,aes(x=x,y=y,colour=colour,shape=shape)) +
geom_point(size=3,alpha=0.7) +
geom_vline(x=0,alpha=0) +
geom_hline(y=0,alpha=0) +
scale_shape_manual(values=1:10) +
labs(x=x[[1]],y=y[[1]],colour=colour[[1]],shape=shape[[1]])
)
}
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
theme(legend.position='none')
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate,scales='free_y') +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
theme(legend.position='none')
ggplot(subset(track,replicate<4),aes(x=year+quarter/4,y=catches_total*4/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Catches (mil. t)") +
theme(legend.position='none')
plot_tradeoff(
perfs,
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(safety20='Safety P(B>20%B0)'),
colour = list(class='Class'),
shape = list(class='Class')
)
plot_tradeoff(
subset(perfs,class=="BRule"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(safety20='Safety P(B>20%B0)'),
colour = list(p2='Target'),
shape = list(p3='Limit')
)
plot_tradeoff(
subset(perfs,class=="BRule"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(safety10='Safety P(B>10%B0)'),
colour = list(p2='Target'),
shape = list(p3='Threshold')
)
plot_tradeoff(
perfs,
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(safety='Safety P(B>20%B0)'),
colour = list(class='Class'),
shape = list(class='Class')
)
plot_tradeoff(
perfs,
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Safety P(B>20%B0)'),
colour = list(class='Class'),
shape = list(class='Class')
)
plot_tradeoff(
subset(perfs,class=="FRange"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(p1='Frequency'),
shape = list(p3='Threshold')
)
plot_tradeoff(
subset(perfs,class=="FRange"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(p1='Frequency'),
shape = list(p3='Target')
)
plot_tradeoff(
subset(perfs,class=="FRange"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(p2='Precision'),
shape = list(p3='Target')
)
plot_tradeoff(
subset(perfs,class=="FRange"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(p3='Target'),
shape = list(p4='Buffer')
)
plot_tradeoff(
perfs,
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(class='Class'),
shape = list(class='Class')
)
plot_tradeoff(
subset(perfs,class=="BRule"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(p2='Target'),
shape = list(p3='Threshold')
)
load(c(
'procedures','samples',
'performances',
'track'
),from='../output')
perfs <- merge(procedures,
ddply(performances,.(procedure),summarise,
yield = mean(catches_total)/1000*4,
stability = -mean(catches_mapc),
status = mean(status_mean),
safety10 = 1-mean(status_b10),
safety20 = 1-mean(status_b20)
)
)
track <- within(track,{
procedure <- factor(procedure)
})
plot_tradeoff <- function(data,x,y,colour,shape){
data <- within(data,{
x = data[,names(x)]
y = data[,names(y)]
colour = factor(data[,names(colour)])
shape = factor(data[,names(shape)])
})
print(
ggplot(data,aes(x=x,y=y,colour=colour,shape=shape)) +
geom_point(size=3,alpha=0.7) +
geom_vline(x=0,alpha=0) +
geom_hline(y=0,alpha=0) +
scale_shape_manual(values=1:10) +
labs(x=x[[1]],y=y[[1]],colour=colour[[1]],shape=shape[[1]])
)
}
ggplot(subset(track,replicate<4 & quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate,scales='free_y') +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Spawning biomass (mil. t)") +
theme(legend.position='none')
ggplot(subset(track,replicate<4),aes(x=year+quarter/4,y=catches_total*4/1e6)) +
geom_line(aes(colour=procedure)) +
facet_wrap(~replicate) +
geom_vline(x=2015,linetype=2) +
labs(x="Year",y="Catches (mil. t)") +
theme(legend.position='none')
plot_tradeoff(
perfs,
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(class='Class'),
shape = list(class='Class')
)
plot_tradeoff(
subset(perfs,class=="BRule"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(p2='Target'),
shape = list(p3='Threshold')
)
plot_tradeoff(
subset(perfs,class=="FRange"),
x = list(yield='Yield (mean annual catch, `000 t)'),
y = list(status='Status (mean of B/B0)'),
colour = list(p3='Target'),
shape = list(p4='Buffer')
)
