setwd("~/Trophia/Code/ioskj/yield/display")
source('../../common.R',local=T)
load(c(
'yield_curve','msy'
),from='../output')
load(c(
'maturities','selectivities'
),from='../../model/output')
source('../../common.R',local=T)
load(c(
'curve','msy'
),from='../output')
load(c(
'maturities','selectivities'
),from='../../model/output')
curve
ggplot(recruits_sizes,aes(x=exprate,y=yield)) +
geom_line() +
labs(x="Exploitation rate",y="Yield")
ggplot(curve,aes(x=exprate,y=yield)) +
geom_line() +
labs(x="Exploitation rate",y="Yield")
ggplot(curve,aes(x=status,y=yield)) +
geom_line() +
labs(x="Stock status",y="Yield")
ggplot(curve,aes(x=depletion,y=yield)) +
geom_line() +
labs(x="Depletion (B/B0)",y="Yield")
ggplot(maturities,aes(x=length,y=value)) +
geom_line() +
labs(x="Length (cm)",y="Proportion mature")
selectivities
ggplot(aes(x=length,y=value)) +
geom_line(data=maturities) +
geom_line(data=selectivities) +
labs(x="Length (cm)",y="Proportion mature / selected")
ggplot() +
geom_line(data=maturities,aes(x=length,y=value)) +
geom_line(data=selectivities,aes(x=length,y=value)) +
labs(x="Length (cm)",y="Proportion mature / selected")
ggplot() +
geom_line(data=maturities,aes(x=length,y=value,colour=maturity)) +
geom_line(data=selectivities,aes(x=length,y=value,colour=method)) +
labs(x="Length (cm)",y="Proportion mature / selected")
ggplot() +
geom_line(data=maturities,aes(x=length,y=value,colour="maturity")) +
geom_line(data=selectivities,aes(x=length,y=value,colour=method)) +
labs(x="Length (cm)",y="Proportion mature / selected")
ggplot() +
geom_line(data=maturities,aes(x=length,y=value),colour='black',linetype=2) +
geom_line(data=selectivities,aes(x=length,y=value,colour=method)) +
labs(x="Length (cm)",y="Proportion mature / selected")
source('../../common.R',local=T)
load(c(
'curve','msy'
),from='../output')
load(c(
'maturities','selectivities'
),from='../../model/output')
print(
ggplot(curve,aes(x=exprate,y=yield)) +
geom_line() +
labs(x="Exploitation rate",y="Yield")
)
ggplot(curve,aes(x=depletion,y=yield)) +
geom_line() +
labs(x="Depletion (B/B0)",y="Yield")
ggplot() +
geom_line(data=maturities,aes(x=length,y=value),colour='black',linetype=2) +
geom_line(data=selectivities,aes(x=length,y=value,colour=method)) +
labs(x="Length (cm)",y="Proportion mature / selected")
load(c(
'curve','msy'
),from='../output')
load(c(
'maturities','selectivities'
),from='../../model/output')
ggplot(curve,aes(x=depletion,y=yield)) +
geom_line() +
labs(x="Depletion (B/B0)",y="Yield")
load(c(
'curve','model'
),from='../output')
load(c(
'maturities','selectivities'
),from='../../model/output')
ggplot(curve,aes(x=exprate,y=yield)) +
geom_line() +
labs(x="Exploitation rate",y="Yield")
ggplot(curve,aes(x=depletion,y=yield)) +
geom_line() +
labs(x="Depletion (B/B0)",y="Yield")
load(c(
'curve','model'
),from='../output')
load(c(
'maturities','selectivities'
),from='../../model/output')
ggplot(curve,aes(x=exprate,y=yield)) +
geom_line() +
geom_point(data=model,aes(x=e_msy,y=msy)) +
labs(x="Exploitation rate",y="Yield")
geom_line() +
geom_point(data=model,aes(x=e_msy,y=msy),shape=1,size=2) +
labs(x="Exploitation rate",y="Yield")
ggplot(curve,aes(x=exprate,y=yield)) +
geom_line() +
geom_point(data=model,aes(x=e_msy,y=msy),shape=1,size=2) +
labs(x="Exploitation rate",y="Yield")
?hsv
ggplot(curve,aes(x=exprate,y=yield)) +
geom_line() +
geom_point(data=model,aes(x=e_msy,y=msy),shape=1,size=3,colour=hsv(0.5,0.7,0.7)) +
labs(x="Exploitation rate",y="Yield")
ggplot(curve,aes(x=exprate,y=yield)) +
geom_line() +
geom_point(data=model,aes(x=e_msy,y=msy),shape=16,size=3,colour=hsv(0.3,0.7,0.7)) +
labs(x="Exploitation rate",y="Yield")
ggplot(curve,aes(x=depletion,y=yield)) +
geom_line() +
geom_point(data=model,aes(x=e_msy,y=msy),shape=16,size=3,colour=hsv(0.3,0.7,0.7)) +
labs(x="Depletion (B/B0)",y="Yield (t, quarterly)")
setwd("~/Trophia/Code/ioskj/feasible/display")
source('../../common.R',local=T)
load(c(
'accepted','rejected'
),from='../output')
load(c(
#'accepted',
'rejected'
),from='../output')
ddply(rejected,criterion,count)
View(rejected)
ddply(rejected,.(criterion),count)
ddply(rejected,.(criterion),count)
ddply(rejected,.(criterion),summarise,n=count(time))
ddply(rejected,.(criterion),nrow)
load(c(
#'accepted',
'rejected'
),from='../output')
ddply(rejected,criterion,count)
ddply(rejected,criterion,nrow)
ddply(rejected,.(criterion),nrow)
0.4
0.4/4
load(c(
'accepted',
'rejected'
),from='../output')
ddply(rejected,.(criterion),nrow)
names(accepted)
param <- "recruits_deviations.2005..value"
data.frame(value=accepted[,param],criterion=0)
values <- rbind(
data.frame(value=accepted[,param],criterion=0),
data.frame(value=rejected[,param],criterion=rejected[,param])
)
values
data.frame(value=accepted[,param],criterion=0)
data.frame(value=rejected[,param],criterion=rejected[,param])
param <- "recruits_deviations.2005..value"
values <- rbind(
data.frame(value=accepted[,param],criterion=0),
data.frame(value=rejected[,param],criterion=rejected$criterion)
)
ggplot(values,aes(x=value,colour=criterion)) + geom_bar(stat=identity)
param <- "recruits_deviations.2005..value"
values <- rbind(
data.frame(value=accepted[,param],criterion=0),
data.frame(value=rejected[,param],criterion=rejected$criterion)
)
ggplot(values,aes(x=value,colour=criterion)) + geom_bar(stat=identity)
ggplot(values,aes(x=value,colour=criterion)) + geom_bar(stat='identity')
?geom_bar
ggplot(values,aes(x=value,colour=criterion)) +
geom_bar(stat='bin')
ggplot(values,aes(x=value,colour=criterion)) +
geom_bar()
ggplot(values,aes(x=value)) +
geom_bar()
ggplot(values,aes(x=value,colour=criterion)) +
geom_bar()
source('../../common.R',local=T)
load(c(
'accepted',
'rejected'
),from='../output')
param <- "recruits_deviations.2005..value"
values <- rbind(
data.frame(value=accepted[,param],criterion=0),
data.frame(value=rejected[,param],criterion=rejected$criterion)
)
ggplot(values,aes(x=value,colour=criterion)) +
geom_bar()
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar()
names(accepted)
param <- "recruits_unfished"
name <- paste0(param,"..value")
values <- rbind(
data.frame(value=accepted[,param],criterion=0),
data.frame(value=rejected[,param],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labels(x="Value",y="Count")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labels(x="Value",y="Count")
name
param <- "recruits_unfished"
name <- paste0(param,".value")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labels(x="Value",y="Count")
name
data.frame(value=accepted[,name],criterion=0)
data.frame(value=rejected[,name],criterion=rejected$criterion)
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
head(values)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labels(x="Value",y="Count")
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labs(x="Value",y="Count")
names(accepted)
param <- "recruits_deviations.2006."
name <- paste0(param,".value")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labs(x="Value",y="Count")
melt(accepted[,paste0("recruits_deviations.",1990:2010,"..value")])
temp <- melt(accepted[,paste0("recruits_deviations.",1990:2010,"..value")])
head(temp)
require(stringr)
str_extract(temp$variable, "\\d+")
temp$year <- str_extract(temp$variable,"\\d+")
ddply(temp,.(year),sum)
ddply(temp,.(year),summarise,m=mean(value))
temp <- melt(accepted[,paste0("recruits_deviations.",1990:2012,"..value")])
temp$year <- str_extract(temp$variable,"\\d+")
ddply(temp,.(year),summarise,m=mean(value))
ggplot(temp,aes(x=year,y=value)) + geom_violin()
ggplot(temp,aes(x=year,y=value)) +
geom_violin(fill='grey') +
geom_hline(y=0,linetype=2)
load(c(
'accepted',
'rejected',
'track'
),from='../output')
names(track)
ggplot(track,aes(x=year+quarter/4,y=biomass_spawning_overall,group=replicate)) +
geom_line(alpha=0.1)
ggplot(subset(track,quarter=0),aes(x=year+quarter/4,y=biomass_spawning_overall,group=replicate)) +
geom_line(alpha=0.1)
ggplot(subset(track,quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall,group=replicate)) +
geom_line(alpha=0.1)
source('../../common.R',local=T)
require(stringr)
load(c(
'accepted',
'rejected',
'track'
),from='../output')
ddply(rejected,.(criterion),nrow)
temp <- melt(accepted[,paste0("recruits_deviations.",1990:2012,"..value")])
temp$year <- str_extract(temp$variable,"\\d+")
ddply(temp,.(year),summarise,m=mean(value))
ggplot(temp,aes(x=year,y=value)) +
geom_violin(fill='grey') +
geom_hline(y=0,linetype=2)
ddply(rejected,.(criterion),nrow)
param <- "recruits_unfished"
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labs(x="Value",y="Count")
param <- "recruits_unfished"
name <- paste0(param,".value")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labs(x="Value",y="Count")
names(accepted)
param <- "recruits_deviations.2005."
param <- "recruits_deviations.2006."
name <- paste0(param,".value")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labs(x="Value",y="Count")
param <- "recruits_deviations.2005."
name <- paste0(param,".value")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion)) +
geom_bar() + labs(x="Value",y="Count")
ggplot(subset(track,quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall,group=replicate)) +
geom_line(alpha=0.1)
ggplot(subset(track,quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall,group=replicate)) +
geom_line(alpha=0.1) +
scale_y_log()
ggplot(subset(track,quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall,group=replicate)) +
geom_line(alpha=0.1) +
scale_y_log10()
ggplot(subset(track,quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall,group=replicate)) +
geom_line(alpha=0.2) +
scale_y_log10()
ggplot(subset(track,quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1000,group=replicate)) +
geom_line(alpha=0.2) +
scale_y_log10()
ggplot(subset(track,quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1000,group=replicate)) +
geom_line(alpha=0.2) +
scale_y_log10() +
labs(x="Year",y="Total spawning biomass (t)")
table(rejected$criterion)
table(rejected$criterion)$1
table(rejected$criterion)[1]
param <- "recruits_unfished"
name <- paste0(param,".value")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,group=criterion)) +
geom_bar() + labs(x="Value",y="Count")
ggplot(values,aes(x=value,colour=criterion)) +
geom_density() + labs(x="Value",y="Count")
param <- "recruits_deviations.2006."
name <- paste0(param,".value")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,colour=criterion)) +
geom_density() + labs(x="Value",y="Count")
param <- "recruits_deviations.2005."
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,colour=criterion)) +
geom_density() + labs(x="Value",y="Count")
ggplot(values,aes(x=value,colour=criterion)) +
geom_density(size=2,alpha=0.3) +
labs(x="Value",y="Count")
ggplot(values,aes(x=value,fill=criterion)) +
geom_density(size=2,alpha=0.3) +
labs(x="Value",y="Count")
ggplot(values,aes(x=value,fill=criterion)) +
geom_density(alpha=0.3) +
labs(x="Value",y="Count")
ggplot(values,aes(x=value,fill=criterion)) +
geom_density(alpha=0.2) +
labs(x="Value",y="Count")
ggplot(values,aes(x=value,fill=criterion,colour=criterion)) +
geom_density(alpha=0.2) +
labs(x="Value",y="Count")
param <- "recruits_unfished"
name <- paste0(param,".value")
values <- rbind(
data.frame(value=accepted[,name],criterion=0),
data.frame(value=rejected[,name],criterion=rejected$criterion)
)
values$criterion = factor(values$criterion)
ggplot(values,aes(x=value,fill=criterion,colour=criterion)) +
geom_density(alpha=0.2) +
labs(x="Value",y="Count")
geom_density
?geom_density
ggplot(values,aes(x=value,fill=criterion,colour=criterion)) +
geom_density(adjust=1/2,alpha=0.2) +
labs(x="Value",y="Count")
ggplot(values,aes(x=value,fill=criterion,colour=criterion)) +
geom_density(adjust=1/2,alpha=0.2,y=..count..) +
labs(x="Value",y="Count")
ggplot(values,aes(x=value,fill=criterion,colour=criterion)) +
geom_density(aes(y=..count..),adjust=1/2,alpha=0.2,) +
labs(x="Value",y="Count")
temp <- melt(accepted[,paste0("recruits_deviations.",1990:2012,"..value")])
temp$year <- str_extract(temp$variable,"\\d+")
ggplot(temp,aes(x=year,y=value)) +
geom_violin(fill='grey') +
geom_point(data=ddply(temp,.(year),summarise,y=mean(value)),aes(y=y)) +
geom_hline(y=0,linetype=2)
names(rejected)
