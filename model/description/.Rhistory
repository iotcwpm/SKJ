geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.3) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
)
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.3) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
regions <- read.table('../../data/area-polygons.txt',header=T)
names(regions) <- c('region','lat','lon')
catches <- read.table('../../data/input/catch_distr.tsv',header=T)
names(catches) <- c('method','lat','lon','catch')
catches_other <- read.table('../../data/input/catch_distr_other.tsv',header=T)
names(catches_other) <- c('fleet','region','method','catch','lat','lon')
catches <- rbind(catches,catches_other[,c('method','lat','lon','catch')])
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.3) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
)
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.3) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
temp
temp <- ddply(
subset(nc,SpCde=='SKJ' & (Year.An %in% 2005:2014) & (FlCde %in% c('IDN','LKA','IRN','IND','PAK'))),
.(FlCde,AreaOM,Method),
summarise,Catch=sum(Catch.Capture.t.,na.rm=T)/10
)
temp
setwd("~/trophia/code/ioskj/data")
write.table(temp,file="input/catch_distr_other.tsv",col.names=T,row.names=F,quote=F,sep='\t')
names(catches_other) <- c('fleet','region','method','catch')
# Assign some nominal lat/lons
temp <- merge(temp,read.table(text='
FlCde	AreaOM	Method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T))
catches <- rbind(catches,catches_other)
read.table(text='
FlCde	AreaOM	Method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T)
merge(catches_other,read.table(text='
FlCde	AreaOM	Method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T))
merge(catches_other,read.table(text='
fleet	region	method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T))
merge(catches_other,read.table(text='
fleet	region	method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T))
read.table(text='
fleet	region	method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T)
read.table(text='
fleet	region	method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T)
setwd("~/trophia/code/ioskj/model/description")
catches <- read.table('../../data/input/catch_distr.tsv',header=T)
names(catches) <- c('method','lat','lon','catch')
# Catches with no lats and lons
catches_other <- read.table('../../data/input/catch_distr_other.tsv',header=T)
names(catches_other) <- c('fleet','region','method','catch')
merge(catches_other,read.table(text='
fleet	region	method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T))
catches_other <- merge(catches_other,read.table(text='
fleet	region	method	lat	lon
IDN	EA	PS	0	90
IDN	EA	PL	-2	92
IDN	EA	GN	-4	94
IDN	EA	OT	-6	96
IND	W	PS	19	72
IND	W	PL	17	72
IND	W	GN	15	72
IND	W	OT	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	21	60
IRN	W	GN	22	60
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	GN	5	84
LKA	EA	OT	5	86
PAK	W	GN	23	65
',header=T))
catches <- rbind(catches,catches_other)
catches_other
catches
catches_other$region <- NULL
catches <- rbind(catches,catches_other)
catches_other
head(catches)
catches_other$fleet <- NULL
catches <- rbind(catches,catches_other)
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
catches_other <- read.table('../../data/input/catch_distr_other.tsv',header=T)
names(catches_other) <- c('fleet','region','method','catch')
# Assign some nominal lat/lons
catches_other <- merge(catches_other,read.table(text='
fleet	region	method	lat	lon
IDN	EA	PL	0	95
IDN	EA	GN	-2	97
IDN	EA	OT	-4	99
IDN	EA	PS	-6	101
IND	W	PS	19	72
IND	W	GN	17	72
IND	W	OT	15	72
IND	W	PL	13	72
IND	EA	PS	19	85
IND	EA	GN	17	85
IND	EA	OT	15	85
IRN	W	PS	24	60
IRN	W	GN	22	62
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	OT	5	84
LKA	EA	GN	5	86
PAK	W	GN	23	66
',header=T))
catches_other$fleet <- NULL
catches_other$region <- NULL
catches <- rbind(catches,catches_other)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
)
catches_other <- read.table('../../data/input/catch_distr_other.tsv',header=T)
names(catches_other) <- c('fleet','region','method','catch')
catches <- read.table('../../data/input/catch_distr.tsv',header=T)
names(catches) <- c('method','lat','lon','catch')
# Catches with no lats and lons
catches_other <- read.table('../../data/input/catch_distr_other.tsv',header=T)
names(catches_other) <- c('fleet','region','method','catch')
# Assign some nominal lat/lons
catches_other <- merge(catches_other,read.table(text='
fleet	region	method	lat	lon
IDN	EA	PL	0	95
IDN	EA	GN	-2	97
IDN	EA	OT	-4	99
IDN	EA	PS	-6	101
IND	W	PS	19	72
IND	W	GN	17	72
IND	W	OT	15	72
IND	W	PL	13	72
IND	EA	PS	19	83
IND	EA	GN	17	83
IND	EA	OT	15	83
IRN	W	PS	24	60
IRN	W	GN	22	62
LKA	EA	PS	5	80
LKA	EA	PL	5	82
LKA	EA	OT	5	84
LKA	EA	GN	5	86
PAK	W	GN	23	66
',header=T))
catches_other$fleet <- NULL
catches_other$region <- NULL
catches <- rbind(catches,catches_other)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
)
# Region polygon definitions
regions <- read.table('../../data/area-polygons.txt',header=T)
names(regions) <- c('region','lat','lon')
# Catches with lats and lons
catches <- read.table('../../data/input/catch_distr.tsv',header=T)
names(catches) <- c('method','lat','lon','catch')
# Catches with no lats and lons
catches_other <- read.table('../../data/input/catch_distr_other.tsv',header=T)
names(catches_other) <- c('fleet','region','method','catch')
# Assign some nominal lat/lons
catches_other <- merge(catches_other,read.table(text='
fleet	region	method	lat	lon
IDN	EA	PL	0	95
IDN	EA	GN	-2	97
IDN	EA	OT	-4	99
IDN	EA	PS	-6	101
IND	W	PS	19	72
IND	W	GN	17	72
IND	W	OT	15	72
IND	W	PL	13	72
IND	EA	PS	19	83
IND	EA	GN	17	83
IND	EA	OT	15	83
IRN	W	PS	24	60
IRN	W	GN	22	62
LKA	EA	PS	5	78
LKA	EA	PL	5	80
LKA	EA	OT	5	82
LKA	EA	GN	5	84
PAK	W	GN	23	66
',header=T))
catches_other$fleet <- NULL
catches_other$region <- NULL
catches <- rbind(catches,catches_other)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator') +
labs(fill='Region')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
scale_y_continuous('',expand=c(0,0)) +
scale_x_continuous('',expand=c(0,0)) +
coord_map('mercator',xlim=c(20,160),ylim=c(-50,40)) +
labs(fill='Region')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
coord_map('mercator',xlim=c(20,160),ylim=c(-50,40)) +
labs(fill='Region')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
coord_map('mercator',xlim=c(30,130),ylim=c(-40,30)) +
labs(fill='Region')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
coord_map('mercator',xlim=c(35,125),ylim=c(-40,30)) +
labs(fill='Region')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=12) +
coord_map('mercator',xlim=c(35,125),ylim=c(-35,27)) +
labs(fill='Region')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=15) +
coord_map('mercator',xlim=c(35,125),ylim=c(-35,27)) +
labs(fill='Region')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=20) +
coord_map('mercator',xlim=c(35,125),ylim=c(-35,27)) +
labs(fill='Region')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=20) +
coord_map('mercator',xlim=c(35,122),ylim=c(-32,27)) +
labs(colour='Method',area='Catch t/y')
)
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=20) +
coord_map('mercator',xlim=c(35,122),ylim=c(-32,27)) +
labs(colour='Method',size='Catch (t/y)')
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=22) +
coord_map('mercator',xlim=c(35,122),ylim=c(-32,27)) +
labs(colour='Method',size='Catch (t/y)')
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=22,breaks=0,50000,10000,50000) +
coord_map('mercator',xlim=c(35,122),ylim=c(-32,27)) +
labs(colour='Method',size='Catch (t/y)',x='',y='') +
theme(legend.position="top")
)
print(
ggplot(subset(map_data("world"),long>30 & long<130 & lat<30 & lat>-40)) +
geom_polygon(data=regions,aes(x=lon,y=lat,group=region),fill='white',colour='grey30',alpha=0.5) +
geom_polygon(aes(x=long, y=lat, group=group),fill='white',colour='grey60') +
geom_point(data=catches,aes(x=lon,y=lat,size=catch,color=method),alpha=0.5) +
scale_size_area(max_size=22,breaks=c(0,50000,10000,50000)) +
coord_map('mercator',xlim=c(35,122),ylim=c(-32,27)) +
labs(colour='Method',size='Catch (t/y)',x='',y='') +
theme(legend.position="top")
)
