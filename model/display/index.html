<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Indian Ocean skipjack model : general outputs
		</title>
		<meta charset="utf-8">
		<link rel="stylesheet" type="text/css" href="/core/stencils/themes/default/theme.css"><script type="text/javascript">(function(c){
	var d=document,s,i,l;
	s=d.styleSheets;for(i=0;i!=s.length;i++){if((s[i].href||'').match(c)){try{if(s[i].cssRules.length)return;}catch(e){}}}
	l=d.createElement('link');l.rel='stylesheet';l.type='text/css';l.href='http://stenci.la'+c;
	d.documentElement.className='unready';l.onload=function(){d.documentElement.className='';};
	d.getElementsByTagName('head')[0].appendChild(l);
})('/core/stencils/themes/default/theme.css');</script>
		<style type="text/css">.unready{display:none;}
		</style>
	</head>
	<body>
		<main id="content"> 
			<div id="title">Indian Ocean skipjack model : general outputs
			</div>
			<p>This section presents model outputs generated from the <code>run</code> task (i.e. <code>./ioskj.exe run</code>) which uses the reference parameter set defined in the <code>parameters/input</code> folder. Since those parameter values are user inputs the following may not reflect best parameter estimates. These summaries are primarily intended for illustrating the model struture.
			</p>
			<pre data-code="r" data-hash="r778EwA">
source('../../common.R',local=T)
load(c(
	'lengths','recruits_sizes',
	'growth_increments','growth',
	'mortalities',
	'weights','maturities','selectivities',
	'movement',
	'numbers',
	'track'
),from='../../model/output')


			</pre>
			<section>
				<h1 id="section-1" class="level-1"><span class="label"><span class="path">1</span><span class="separator"> </span></span>Recruits size distribution
				</h1>
				<figure id="figure-1">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="qV3K9sC">
print(
	ggplot(recruits_sizes,aes(x=length,y=value)) +
		geom_line() +
		labs(x="Length (cm)",y="Proportion")
)

					</pre><img src="qV3K9sC.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">1</span><span class="separator">:</span></span>Distribution of the length of recruits. Recruits are added to the model following this distribution.
					</figcaption>
				</figure>
			</section>
			<section>
				<h1 id="section-2" class="level-1"><span class="label"><span class="path">2</span><span class="separator"> </span></span>Weight and maturity
				</h1>
				<figure id="figure-2">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="bVaLgqA">
print(
	ggplot(weights,aes(x=length,y=value)) +
		geom_line() +
		labs(x="Length (cm)",y="Weight (kg)")
)

					</pre><img src="bVaLgqA.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">2</span><span class="separator">:</span></span>Weight at length.
					</figcaption>
				</figure>
				<figure id="figure-3">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="qWtbc4H">
print(
	ggplot(maturities,aes(x=length,y=value)) +
		geom_line() +
		labs(x="Length (cm)",y="Proportion mature")
)

					</pre><img src="qWtbc4H.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">3</span><span class="separator">:</span></span>Maturity at length.
					</figcaption>
				</figure>
			</section>
			<section>
				<h1 id="section-3" class="level-1"><span class="label"><span class="path">3</span><span class="separator"> </span></span>Growth
				</h1>
				<figure id="figure-4">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="y37GRf">
print(
	ggplot(growth_increments,aes(x=length,y=value)) +
		geom_hline(y=0,colour='grey') +
		geom_line() +
		labs(x="Length (cm)",y="Quarterly growth increment (cm)")
)

					</pre><img src="y37GRf.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">4</span><span class="separator">:</span></span>Growth increments by length.
					</figcaption>
				</figure>
				<figure id="figure-5">
					<pre data-code="r" data-format="png" data-size="17x15cm" data-hash="sMJDsEG">
print(
	ggplot(growth) +
		geom_tile(aes(y=length,x=length_from,fill=value)) +
		scale_fill_gradient(low="white",high="red") + 
		geom_abline(a=0,b=1) + 
		labs(x="Length from (cm)",y="Length to (cm)",fill="Proportion")
)

					</pre><img src="sMJDsEG.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">5</span><span class="separator">:</span></span>Growth transition matrix indicating the proportion of fish that transition from one length class to other length classes in one quarter.
					</figcaption>
				</figure>
			</section>
			<section>
				<h1 id="section-4" class="level-1"><span class="label"><span class="path">4</span><span class="separator"> </span></span>Mortality
				</h1>
				<figure id="figure-6">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="q1SS5zn">
print(
	ggplot(mortalities,aes(x=length,y=value)) +
		geom_hline(y=0,colour='grey') +
		geom_line() +
		labs(x="Length (cm)",y="Instantaneous annual rate or natural mortality")
)

					</pre><img src="q1SS5zn.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">6</span><span class="separator">:</span></span>Mortality at length.
					</figcaption>
				</figure>
			</section>
			<section>
				<h1 id="section-5" class="level-1"><span class="label"><span class="path">5</span><span class="separator"> </span></span>Movement
				</h1>
				<figure id="figure-7">
					<pre data-code="r" data-format="png" data-size="16x16cm" data-hash="q4epCfv">
print(
	ggplot(movement,aes(y=region_from,x=region,fill=value,label=round(value,4))) +
		geom_tile() +
		scale_fill_gradient(low="white",high="red") + 
		geom_text() +
		labs(y="Region from",x="Region to",fill="Proportion")
)

					</pre><img src="q4epCfv.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">7</span><span class="separator">:</span></span>Movement proportion by quarter. Each cell indicates the proportion of fish moving from one region to another in one quarter.
					</figcaption>
				</figure>
				<div data-if="0" data-off="true">
					<figure>
						<pre data-code="r" data-format="png" data-size="17x25cm">
print(
	ggplot(numbers) + 
		geom_line(aes(x=length,y=value/1e6)) +
		facet_grid(age~region,scale='free_y') + 
		labs(x="Length (cm)",y="Number (mil.)")
)

						</pre>
						<figcaption>Unfished equilbrium numbers at age and size and region. Each panel shows the length ditribution for a particular age (in quarters) and region.
						</figcaption>
					</figure>
					<figure>
						<pre data-code="r" data-format="png" data-size="17x10cm">
print(
	ggplot(ddply(numbers,.(region,length),summarise,numbers=sum(value)/1e6)) +
		geom_line(aes(x=length,y=numbers)) +
		facet_grid(.~region) + 
		labs(x="Length (cm)",y="Number (mil.)")
)

						</pre>
						<figcaption>Unfished equilibrium numbers at size by region. Each panel is the aggregated length distribtuion across all ages within a particular region.
						</figcaption>
					</figure>
				</div>
			</section>
			<section>
				<h1 id="section-6" class="level-1"><span class="label"><span class="path">6</span><span class="separator"> </span></span>Selectivities
				</h1>
				<figure id="figure-8">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="r7zFPzw">
print(
	ggplot(selectivities,aes(x=length,y=value,colour=method))+
		geom_line() + 
		labs(x="Length (cm)",y="Selectivity (prop.)",colour='Method')
)

					</pre><img src="r7zFPzw.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">8</span><span class="separator">:</span></span>Selectivity at length by fishing method.
					</figcaption>
				</figure>
			</section>
			<pre data-code="r" data-hash="bJmxXMa">
plot_track <- function(what,label){
	plot <- ggplot(track,aes(x=year+quarter/4)) + 
			geom_line(aes_string(y=what)) + 
			geom_hline(y=0,alpha=0) +
			geom_vline(x=2015,alpha=0.6,linetype=2) +
			labs(x='Year',y=label)
	print(plot)
	plot
}



			</pre>
			<section>
				<h1 id="section-7" class="level-1"><span class="label"><span class="path">7</span><span class="separator"> </span></span>Biomass and recruitment trajectories
				</h1>
				<figure id="figure-9">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="bT8mFnh">
plot_track('biomass_status','Stock status (B/B0)')

					</pre><img src="bT8mFnh.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">9</span><span class="separator">:</span></span>Stock status trajectory.
					</figcaption>
				</figure>
				<figure id="figure-10">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="bxBYpTk">
print(
	ggplot(subset(track,quarter==0),aes(x=year+quarter/4)) + 
	geom_line(aes(y=biomass_spawners_w,colour='W')) + 
	geom_line(aes(y=biomass_spawners_m,colour='M')) + 
	geom_line(aes(y=biomass_spawners_e,colour='E')) + 
	geom_hline(y=0,alpha=0) +
	geom_vline(x=2015,alpha=0.6,linetype=2) +
	labs(x='Year',y='Mature biomass in region',colour='Region')
)

					</pre><img src="bxBYpTk.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">10</span><span class="separator">:</span></span>Biomass of spawners by region (first quarter).
					</figcaption>
				</figure>
				<figure id="figure-11">
					<pre data-code="r" data-format="png" data-size="17x20cm" data-hash="sjj8VGl">
p1 = plot_track('recruits_determ/1e6','Deterministic recruitment (mil.)')
p2 = plot_track('recruits_deviation','Recruitment deviation')
p3 = plot_track('recruits/1e6','Recruitment (mil.)')
multiplot(p1,p2,p3)

					</pre><img src="sjj8VGl.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">11</span><span class="separator">:</span></span>Recruitment trajectories
					</figcaption>
				</figure>
			</section>
			<section>
				<h1 id="section-8" class="level-1"><span class="label"><span class="path">8</span><span class="separator"> </span></span>Fishery related trajectories
				</h1>
				<figure id="figure-12">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="rga2tg4">
temp <- melt(subset(
			track,quarter==0,select=c('year','biomass_vulnerable_w_ps','biomass_vulnerable_m_pl','biomass_vulnerable_e_gn')
		),id.vars='year')
print(
	ggplot(temp,aes(x=year,y=value/1e6,colour=variable)) + geom_line() +
		geom_vline(x=2015,alpha=0.6,linetype=2) +
		geom_hline(yintercept=0,alpha=0) +
		labs(x='Year',y='Vulnerable biomass (mil. t)',colour='Region/Method')
)

					</pre><img src="rga2tg4.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">12</span><span class="separator">:</span></span>Vulnerable biomass trajectories for the three main fisjeries
					</figcaption>
				</figure>
				<figure id="figure-13">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="siKn8Dt">
temp <- ddply(track,.(year),summarise,
	w_ps = sum(catches_w_ps),
	m_pl = sum(catches_m_pl),
	e_gn = sum(catches_e_gn)
)
temp <- melt(temp,id.vars='year')
print(
	ggplot(temp,aes(x=year,y=value,colour=variable)) + geom_line() +
		geom_vline(x=2015,alpha=0.6,linetype=2) +
		labs(x='Year',y='Catches (t)',colour='Region/Method')
)

					</pre><img src="siKn8Dt.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">13</span><span class="separator">:</span></span>Catch trajectories for the three main fisjeries
					</figcaption>
				</figure>
				<figure id="figure-14">
					<pre data-code="r" data-format="png" data-size="17x10cm" data-hash="sjacdVT">
temp <- melt(subset(
			track,quarter==0,select=c('year','exp_rate_w_ps','exp_rate_m_pl','exp_rate_e_gn')
		),id.vars='year')
print(
	ggplot(temp,aes(x=year,y=value,colour=variable)) + geom_line() +
		geom_vline(x=2015,alpha=0.6,linetype=2) +
		labs(x='Year',y='Exploitation rate',colour='Region/Method')
)

					</pre><img src="sjacdVT.png" data-out="true">
					<figcaption><span class="label"><span class="type">Figure</span><span class="number">14</span><span class="separator">:</span></span>Exploitation rate trajectories for the three main fisjeries
					</figcaption>
				</figure>
			</section>
		</main><script src="/core/components/themes/base/boot.js"> </script><script>if(!window.Stencila){window.StencilaHost='http://stenci.la';document.write(unescape('%3Cscript src="http://stenci.la/core/components/themes/base/boot.js"%3E%3C/script%3E'))}</script><script>window.Stencila.Booter.theme('core/stencils/themes/default');</script><script>window.setTimeout(function(){document.documentElement.className='';},10000)</script>
	</body>
</html>