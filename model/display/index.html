<!DOCTYPE html><html><head><title>Indian Ocean skipjack model : general outputs</title><meta charset="utf-8"><meta name="generator" content="Stencila 0.19-ga98db03-dirty"><meta name="viewport" content="width=device-width, initial-scale=1"><meta itemprop="type" content="stencil"><meta itemprop="address" content="/home/nokome/trophia/code/ioskj/model/display"><meta itemprop="version" content=""><meta itemprop="theme" content="core/stencils/themes/default"><link rel="stylesheet" type="text/css" href="/get/web/stencil.min.css"><script type="application/javascript">(function(c){var d=document,s,i,l;s=d.styleSheets;for(i=0;i!=s.length;i++){if((s[i].href||'').match(c)){try{if(s[i].cssRules.length)return;}catch(e){}}}l=d.createElement('link');l.rel='stylesheet';l.type='text/css';l.href='https://stenci.la'+c;d.documentElement.className='unready';l.onload=function(){d.documentElement.className='';};d.getElementsByTagName('head')[0].appendChild(l);})('/get/web/stencil.min.css');</script><style type="text/css">.unready{display:none;}</style><meta itemprop="contexts" content="r"></head><body><main id="content"><div id="title">Indian Ocean skipjack model : general outputs</div><p>This section presents model outputs generated from the <code>run</code> task (i.e. <code>./ioskj.exe run</code>) which uses the reference parameter set defined in the <code>parameters/input</code> folder. Since those parameter values are user inputs the following may not reflect best parameter estimates. These summaries are primarily intended for illustrating the model struture.</p><pre data-exec="r" data-hash="ry7Ad1w" data-error="exception: line 1 did not have 29 elements">
source('../../common.R',local=T)
load(c(
	'length_age','age_size',
	'weight_size','weight_age',
	'maturity_size','maturity_age',
	'mortality','survival',
	'selectivity_size','selectivity_age',
	'movement_region','movement_size', 'movement_age',
	'track'
),from='../output')
</pre><section><h1>Weight and maturity</h1><figure data-index="1"><pre data-exec="r format png size 17x10cm" data-hash="cq4pK6g" data-error="exception: ggplot2 doesn't know how to deal with data of class function">


print(
	ggplot(weights,aes(x=length,y=value)) +
		geom_line() +
		labs(x="Length (cm)",y="Weight (kg)")
)
</pre><figcaption><span data-label="figure-1">Figure 1</span>Weight at length.</figcaption></figure><figure data-index="2"><pre data-exec="r format png size 17x10cm" data-hash="bzT5dYb" data-error="exception: object 'maturities' not found">
print(
	ggplot(maturities,aes(x=length,y=value)) +
		geom_line() +
		labs(x="Length (cm)",y="Proportion mature")
)
</pre><figcaption><span data-label="figure-2">Figure 2</span>Maturity at length.</figcaption></figure></section><section><h1>Growth</h1><figure data-index="3"><pre data-exec="r format png size 17x10cm" data-hash="reBurro">
print(
	ggplot(length_age,aes(x=age,y=mean)) +
		geom_line() +
		geom_ribbon(aes(ymin=mean+qnorm(0.05)*sd,ymax=mean+qnorm(0.95)*sd),alpha=0.25) +
		geom_ribbon(aes(ymin=mean+qnorm(0.25)*sd,ymax=mean+qnorm(0.75)*sd),alpha=0.25) +
		geom_vline(x=seq(4,24,4),lty=3) +
		ylim(0,80) +
		labs(x="Age (qtr)",y="Length (cm)")
)
</pre><div data-out="true"><img src="out/length-at-age--bands-repr-reBurro.png" style="max-width:17cm;max-height:10cm"></div><figcaption><span data-label="figure-3">Figure 3</span>Length at age. Bands represent 50% (inner) and 90% (outer) of lengths for a particular age.</figcaption></figure><figure data-index="4"><pre data-exec="r format png size 17x15cm" data-hash="bPrXALr">
print(
	ggplot(age_size,aes(x=age,y=length,fill=value,label=round(value,2))) +
		geom_tile() +
		scale_fill_gradient(low="white",high=hsv(0.5,0.5,0.5)) + 
		labs(x="Age (qtr)",y="Length",fill="Proportion") + 
		theme(legend.position='none')
)
</pre><div data-out="true"><img src="out/length-distribution-at-ag-bPrXALr.png" style="max-width:17cm;max-height:15cm"></div><figcaption><span data-label="figure-4">Figure 4</span>Length distribution at age. Proportion of fish within each size bin by age. Text values are only shown where proportion &gt; 0.01</figcaption></figure></section><section><h1>Mortality</h1><figure data-index="5"><pre data-exec="r format png size 17x10cm" data-hash="HjNVNl" data-error="exception: object 'mortalities' not found">
print(
	ggplot(mortalities,aes(x=length,y=value)) +
		geom_hline(y=0,colour='grey') +
		geom_line() +
		labs(x="Length (cm)",y="Instantaneous annual rate or natural mortality")
)
</pre><figcaption><span data-label="figure-5">Figure 5</span>Mortality at length.</figcaption></figure></section><section><h1>Movement</h1><figure data-index="6"><pre data-exec="r format png size 16x16cm" data-hash="rTQqNqu" data-error="exception: object 'movement' not found">
print(
	ggplot(movement,aes(y=region_from,x=region,fill=value,label=round(value,4))) +
		geom_tile() +
		scale_fill_gradient(low="white",high="red") + 
		geom_text() +
		labs(y="Region from",x="Region to",fill="Proportion")
)
</pre><figcaption><span data-label="figure-6">Figure 6</span>Movement proportion by quarter. Each cell indicates the proportion of fish moving from one region to another in one quarter.</figcaption></figure><div data-if="0" data-off="true"><figure><pre data-exec="r format png size 17x25cm">
print(
	ggplot(numbers) + 
		geom_line(aes(x=length,y=value/1e6)) +
		facet_grid(age~region,scale='free_y') + 
		labs(x="Length (cm)",y="Number (mil.)")
)
</pre><figcaption>Unfished equilbrium numbers at age and size and region. Each panel shows the length ditribution for a particular age (in quarters) and region.</figcaption></figure><figure><pre data-exec="r format png size 17x10cm">
print(
	ggplot(ddply(numbers,.(region,length),summarise,numbers=sum(value)/1e6)) +
		geom_line(aes(x=length,y=numbers)) +
		facet_grid(.~region) + 
		labs(x="Length (cm)",y="Number (mil.)")
)
</pre><figcaption>Unfished equilibrium numbers at size by region. Each panel is the aggregated length distribtuion across all ages within a particular region.</figcaption></figure></div></section><section><h1>Selectivities</h1><figure data-index="7"><pre data-exec="r format png size 17x10cm" data-hash="sbj3nHM" data-error="exception: object 'selectivities' not found">
print(
	ggplot(selectivities,aes(x=length,y=value,colour=method))+
		geom_line() + 
		labs(x="Length (cm)",y="Selectivity (prop.)",colour='Method')
)
</pre><figcaption><span data-label="figure-7">Figure 7</span>Selectivity at length by fishing method.</figcaption></figure></section><pre data-exec="r" data-hash="iClSLb">
plot_track &lt;- function(what,label){
	plot &lt;- ggplot(track,aes(x=year+quarter/4)) + 
			geom_line(aes_string(y=what)) + 
			geom_hline(y=0,alpha=0) +
			geom_vline(x=2015,alpha=0.6,linetype=2) +
			labs(x='Year',y=label)
	print(plot)
	plot
}
</pre><section><h1>Biomass and recruitment trajectories</h1><figure data-index="8"><pre data-exec="r format png size 17x10cm" data-hash="b73HNVU" data-error="exception: object 'track' not found">


plot_track('biomass_status','Stock status (B/B0)')
</pre><figcaption><span data-label="figure-8">Figure 8</span>Stock status trajectory.</figcaption></figure><figure data-index="9"><pre data-exec="r format png size 17x10cm" data-hash="qCh2V9J" data-error="exception: object 'track' not found">
print(
	ggplot(subset(track,quarter==0),aes(x=year+quarter/4)) + 
	geom_line(aes(y=biomass_spawners_sw,colour='SW')) + 
	geom_line(aes(y=biomass_spawners_nw,colour='NW')) + 
	geom_line(aes(y=biomass_spawners_m,colour='M')) + 
	geom_line(aes(y=biomass_spawners_e,colour='E')) + 
	geom_hline(y=0,alpha=0) +
	geom_vline(x=2015,alpha=0.6,linetype=2) +
	labs(x='Year',y='Mature biomass in region',colour='Region')
)
</pre><figcaption><span data-label="figure-9">Figure 9</span>Biomass of spawners by region (first quarter).</figcaption></figure><figure data-index="10"><pre data-exec="r format png size 17x20cm" data-hash="qWEt8cY" data-error="exception: object 'track' not found">
p1 = plot_track('recruits_determ/1e6','Deterministic recruitment (mil.)')
p2 = plot_track('recruits_deviation','Recruitment deviation')
p3 = plot_track('recruits/1e6','Recruitment (mil.)')
multiplot(p1,p2,p3)
</pre><figcaption><span data-label="figure-10">Figure 10</span>Recruitment trajectories</figcaption></figure></section><section><h1>Fishery related trajectories</h1><figure data-index="11"><pre data-exec="r format png size 17x10cm" data-hash="4E16Lc" data-error="exception: object 'track' not found">
temp &lt;- melt(subset(
			track,quarter==0,select=c('year','biomass_vulnerable_sw_ps','biomass_vulnerable_nw_ps','biomass_vulnerable_m_pl','biomass_vulnerable_e_gn')
		),id.vars='year')
print(
	ggplot(temp,aes(x=year,y=value/1e6,colour=variable)) + geom_line() +
		geom_vline(x=2015,alpha=0.6,linetype=2) +
		geom_hline(yintercept=0,alpha=0) +
		labs(x='Year',y='Vulnerable biomass (mil. t)',colour='Region/Method')
)
</pre><figcaption><span data-label="figure-11">Figure 11</span>Vulnerable biomass trajectories for the three main fisheries</figcaption></figure><figure data-index="12"><pre data-exec="r format png size 17x10cm" data-hash="qIBNDBL" data-error="exception: object 'track' not found">
temp &lt;- ddply(track,.(year),summarise,
	sw_ps = sum(catches_sw_ps),
	nw_ps = sum(catches_nw_ps),
	m_pl = sum(catches_m_pl),
	e_gn = sum(catches_e_gn)
)
temp &lt;- melt(temp,id.vars='year')
print(
	ggplot(temp,aes(x=year,y=value,colour=variable)) + geom_line() +
		geom_vline(x=2015,alpha=0.6,linetype=2) +
		labs(x='Year',y='Catches (t)',colour='Region/Method')
)
</pre><figcaption><span data-label="figure-12">Figure 12</span>Catch trajectories for the three main fisheries</figcaption></figure><figure data-index="13"><pre data-exec="r format png size 17x10cm" data-hash="bZrDC7T" data-error="exception: object 'track' not found">
temp &lt;- melt(subset(
			track,quarter==0,select=c('year','exp_rate_sw_ps','exp_rate_nw_ps','exp_rate_m_pl','exp_rate_e_gn')
		),id.vars='year')
print(
	ggplot(temp,aes(x=year,y=value,colour=variable)) + geom_line() +
		geom_vline(x=2015,alpha=0.6,linetype=2) +
		labs(x='Year',y='Exploitation rate',colour='Region/Method')
)
</pre><figcaption><span data-label="figure-13">Figure 13</span>Exploitation rate trajectories for the three main fisheries</figcaption></figure></section></main><script src="/get/web/stencil.min.js"> </script><script type="application/javascript">if(!window.Stencila){window.StencilaHost="https://stenci.la";document.write(unescape('%3Cscript src="https://stenci.la/get/web/stencil.min.js"%3E%3C/script%3E'))}</script><script>window.setTimeout(function(){document.documentElement.className='';if(!window.Stencila){window.alert('Page could not be fully loaded. Not all functionality will be available.');}},10000)</script></body></html>