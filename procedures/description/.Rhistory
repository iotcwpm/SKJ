require(plyr)
require(ggplot2)
cpue <- read.table('../../data/input/m_pl_cpue.tsv',header=T)
cpue <- ddply(cpue,.(data_year),summarise,cpue=exp(mean(log(location))))
catch <- read.table('../../parameters/input/catches.tsv',header=T)
catch <- ddply(catch,.(year),summarise,catch=sum(value))
temp <- merge(catch,cpue,by.x='year',by.y='data_year')
print(ggplot(temp,aes(x=year,y=catch)) + geom_line()
)
print(ggplot(temp,aes(x=catch,y=cpue)) + geom_line())
print(ggplot(temp,aes(x=catch,y=cpue)) + geom_line() + geom_point())
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_line() + geom_point())
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_line() + geom_point() + geom_label())
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_line() + geom_point() + geom_text(aes(label=year)))
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_point() + geom_text(aes(label=year)))
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_point() + geom_text(aes(label=year,size=1)))
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_point() + geom_text(aes(label=year),size=2))
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_point() + geom_text(aes(label=year),size=5))
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_point() + geom_text(aes(label=year),size=4))
print(ggplot(temp,aes(x=cpue,y=catch)) + geom_point(colour='grey') + geom_text(aes(label=year),size=4))
print(ggplot(temp,aes(x=cpue,y=catch/1000)) + geom_point(colour='grey') + geom_text(aes(label=year),size=4))
print(
ggplot(temp,aes(x=cpue,y=catch/1000)) +
geom_point(colour='grey') +
geom_text(aes(label=year),size=4) +
labs(x='Maldive PL CPUE',y='Catch (overall, 1000 tonnes)')
)
w_ps_cpue <- read.table('../../data/input/w_ps_cpue.tsv',header=T)
head(w_s_cpue)
head(w_ps_cpue)
catch <- read.table('../../parameters/input/catches.tsv',header=T)
catch <- ddply(catch,.(year),summarise,catch=sum(value))
m_pl_cpue <- read.table('../../data/input/m_pl_cpue.tsv',header=T)
m_pl_cpue <- ddply(m_pl_cpue,.(data_year),summarise,m_pl_cpue=exp(mean(log(location))))
temp <- merge(catch,m_pl_cpue,by.x='year',by.y='data_year')
w_ps_cpue <- read.table('../../data/input/w_ps_cpue.tsv',header=T)
w_ps_cpue <- ddply(w_ps,.(data_year),summarise,w_ps_cpue=exp(mean(log(location))))
catch <- read.table('../../parameters/input/catches.tsv',header=T)
catch <- ddply(catch,.(year),summarise,catch=sum(value))
m_pl_cpue <- read.table('../../data/input/m_pl_cpue.tsv',header=T)
m_pl_cpue <- ddply(m_pl_cpue,.(data_year),summarise,m_pl_cpue=exp(mean(log(location))))
temp <- merge(catch,m_pl_cpue,by.x='year',by.y='data_year')
w_ps_cpue <- read.table('../../data/input/w_ps_cpue.tsv',header=T)
w_ps_cpue <- ddply(w_ps_cpue,.(data_year),summarise,w_ps_cpue=exp(mean(log(location))))
temp <- merge(catch,w_ps_cpue,by.x='year',by.y='data_year')
print(
ggplot(temp,aes(x=m_pl_cpue,y=catch/1000)) +
geom_point(colour='grey') +
geom_text(aes(label=year),size=4) +
labs(x='Maldive PL CPUE',y='Catch (overall, 1000 tonnes)')
)
head(temp)
catch <- read.table('../../parameters/input/catches.tsv',header=T)
catch <- ddply(catch,.(year),summarise,catch=sum(value))
m_pl_cpue <- read.table('../../data/input/m_pl_cpue.tsv',header=T)
m_pl_cpue <- ddply(m_pl_cpue,.(data_year),summarise,m_pl_cpue=exp(mean(log(location))))
temp <- merge(catch,m_pl_cpue,by.x='year',by.y='data_year')
w_ps_cpue <- read.table('../../data/input/w_ps_cpue.tsv',header=T)
w_ps_cpue <- ddply(w_ps_cpue,.(data_year),summarise,w_ps_cpue=exp(mean(log(location))))
temp <- merge(temp,w_ps_cpue,by.x='year',by.y='data_year')
print(
ggplot(temp,aes(x=m_pl_cpue,y=catch/1000)) +
geom_point(colour='grey') +
geom_text(aes(label=year),size=4) +
labs(x='Maldive PL CPUE',y='Catch (overall, 1000 tonnes)')
)
print(
ggplot(temp,aes(x=w_ps_cpue,y=catch/1000)) +
geom_point(colour='grey') +
geom_text(aes(label=year),size=4) +
labs(x='Maldive PL CPUE',y='Catch (overall, 1000 tonnes)')
)
temp
temp <- merge(catch,m_pl_cpue,by.x='year',by.y='data_year',all.x=T)
w_ps_cpue <- read.table('../../data/input/w_ps_cpue.tsv',header=T)
w_ps_cpue <- ddply(w_ps_cpue,.(data_year),summarise,w_ps_cpue=exp(mean(log(location))))
temp <- merge(temp,w_ps_cpue,by.x='year',by.y='data_year',all.x=T)
print(
ggplot(temp,aes(x=m_pl_cpue,y=catch/1000)) +
geom_point(colour='grey') +
geom_text(aes(label=year),size=4) +
labs(x='Maldive PL CPUE',y='Catch (overall, 1000 tonnes)')
)
print(
ggplot(temp,aes(x=m_pl_cpue,y=catch/1000)) +
geom_point(colour='grey') +
geom_text(aes(label=year),size=4) +
geom_hline(y=0,alpha=0) + geom_vline(x=0,alpha=0) +
labs(x='Maldive PL CPUE',y='Catch (overall, 1000 tonnes)')
)
print(
ggplot(temp,aes(x=w_ps_cpue,y=catch/1000)) +
geom_point(colour='grey') +
geom_text(aes(label=year),size=4)  +
geom_hline(y=0,alpha=0) + geom_vline(x=0,alpha=0) +
labs(x='Maldive PL CPUE',y='Catch (overall, 1000 tonnes)')
)
w_ps_rate <- lm(catch~w_ps_cpue,temp)
w_ps_rate
w_ps_rate$slope
w_ps_rate$coe
w_ps_rate$coef
with(temp,catch/w_ps_cpue)
with(temp,exp(mean(log(catch/w_ps_cpue),na.rm=T)))
?geom_abline
