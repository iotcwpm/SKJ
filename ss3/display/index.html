<!DOCTYPE html><html><head><title>Indian Ocean skipjack model : Parameter distributions</title><meta charset="utf-8"><meta name="generator" content="Stencila 0.19-ga98db03-dirty"><meta name="viewport" content="width=device-width, initial-scale=1"><meta itemprop="type" content="stencil"><meta itemprop="address" content="/home/nokome/trophia/code/ioskj/ss3/display"><meta itemprop="version" content=""><meta itemprop="theme" content="core/stencils/themes/default"><link rel="stylesheet" type="text/css" href="/get/web/stencil.min.css"><script type="application/javascript">(function(c){var d=document,s,i,l;s=d.styleSheets;for(i=0;i!=s.length;i++){if((s[i].href||'').match(c)){try{if(s[i].cssRules.length)return;}catch(e){}}}l=d.createElement('link');l.rel='stylesheet';l.type='text/css';l.href='https://stenci.la'+c;d.documentElement.className='unready';l.onload=function(){d.documentElement.className='';};d.getElementsByTagName('head')[0].appendChild(l);})('/get/web/stencil.min.css');</script><style type="text/css">.unready{display:none;}</style><meta itemprop="contexts" content="r"></head><body><main id="content"><div id="title">Indian Ocean skipjack model : Parameter distributions</div><pre data-exec="r" data-hash="sM7x8ss">
source('../../common.R',local=T)
require(stringr)
# Read in files
load(c(
	'accepted',
	'rejected',
	'track'
),from='../../ss3/output')
# Add columns to accepted to allow rbinding
accepted$time &lt;- NA
accepted$year &lt;- NA
accepted$quarter &lt;- NA
accepted$criterion &lt;- 0
# Bind together
all &lt;- rbind(accepted,rejected)
</pre><pre data-exec="r const" data-hash="ct569zS">

rejects &lt;- table(rejected$criterion)
</pre><table data-index="1"><caption><span data-label="table-1">Table 1</span>Feasibility criteria used in the FST algorithm</caption><tr><th>Code</th><th>Criterion</th><th>Trials failing this criterion</th></tr><tr><td>1</td><td>Stock status must always be &gt;10% B0</td><td data-text="rejects[1]">3742</td></tr><tr><td>2</td><td>Stock status must be less than 100% B0 since 2008</td><td data-text="rejects[2]">621</td></tr></table><figure data-index="1"><pre data-exec="r format png size 17x10cm const" data-hash="sIxjQcT">
print(
	ggplot(subset(track,quarter==0),aes(x=year+quarter/4,y=biomass_spawning_overall/1000,group=replicate)) + 
		geom_line(alpha=0.2) +
		scale_y_log10() + 
		labs(x="Year",y="Total spawning biomass (`000 t)")
)
</pre><div data-out="true"><img src="out/examples-of-biomass-traje-sIxjQcT.png" style="max-width:17cm;max-height:10cm"></div><figcaption><span data-label="figure-1">Figure 1</span>Examples of biomass trajectories from the FST algorithm. Those trajectories which end prior to 2013 have failed to meet one of the conditioning criteria.</figcaption></figure><pre data-exec="r" data-hash="r3Qf1KC">
library(rpart)
</pre><pre data-exec="r const" data-hash="T3vGxV">


plot_densities &lt;- function(param){
	name &lt;- paste0(param,".value")
	values &lt;- rbind(
		data.frame(value=accepted[,name],criterion=0),
		data.frame(value=rejected[,name],criterion=rejected$criterion)
	)
	values$criterion = factor(values$criterion)
	print(
		ggplot(values,aes(x=value,fill=criterion,colour=criterion)) + 
			geom_density(adjust=1/2,alpha=0.2) + 
			labs(x="Value",y="Density")
	)
}
</pre><p>plot<em>densities('spawners</em>unfished')	plot<em>densities('recruits</em>deviations.2003.')plot<em>densities('movement</em>sw<em>nw')

for param in c('spawners</em>unfished','mortality<em>base','movement</em>stay','recruits<em>deviations.2003.')
	figure
		r format png size 17x10cm const
			plot</em>densities(param)figcaptionDistribution of values of the parameter "<span data-text="param" data-error="exception: object 'param' not found"></span>" according to feasibility criteria (0 indicates the trial met all criteria).</p><figure data-index="2"><pre data-exec="r format png size 17x10cm const" data-hash="rE3iQGA">

temp &lt;- melt(accepted[,paste0("recruits_deviations.",1990:2012,"..value")])
temp$year &lt;- str_extract(temp$variable,"\\d+")
print(ggplot(temp,aes(x=year,y=value)) + 
	geom_violin(fill='grey') +
	geom_point(data=ddply(temp,.(year),summarise,y=mean(value)),aes(y=y)) +
	geom_hline(y=0,linetype=2) + 
	labs(x='Year',y='Value'))
</pre><div data-out="true"><img src="out/distribution-of-values-of-rE3iQGA.png" style="max-width:17cm;max-height:10cm"></div><figcaption><span data-label="figure-2">Figure 2</span>Distribution of values of <code>recruits_deviations</code> parameters that passed all feasibility criteria. The dots represent the mean of each distribution.	</figcaption></figure></main><script src="/get/web/stencil.min.js"> </script><script type="application/javascript">if(!window.Stencila){window.StencilaHost="https://stenci.la";document.write(unescape('%3Cscript src="https://stenci.la/get/web/stencil.min.js"%3E%3C/script%3E'))}</script><script>window.setTimeout(function(){document.documentElement.className='';if(!window.Stencila){window.alert('Page could not be fully loaded. Not all functionality will be available.');}},10000)</script></body></html>