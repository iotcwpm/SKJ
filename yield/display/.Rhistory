# Load in source and output files
source('../../common.R',local=T)
load(c(
'curve','msy','per_recruit'
),from='../../yield/output')
load(c(
'maturities','selectivities'
),from='../../model/output')
per_recruit$number
per_recruit$number = per_recruit$number/per_recruit$number[1]
per_recruit$number
ggplot(per_recruit,aes(x=age,y=number))
labs(x="Age (quarter)",y="Survivers")
ggplot(per_recruit,aes(x=age,y=number)) +
geom_line() +
labs(x="Age (quarter)",y="Survivers")
ggplot(per_recruit,aes(x=age,y=weight)) +
geom_line() +
labs(x="Age (quarter)",y="Weight (kg)")
ggplot(per_recruit,aes(x=age,y=number*weight)) +
geom_line() +
labs(x="Age (quarter)",y="Yeild-per-recruit (kg)")
per_recruit <- per_recruit[-nrow(per_recruit)]
p1 = ggplot(per_recruit,aes(x=age,y=number)) +
geom_line() +
labs(x="Age (quarter)",y="Survival")
p2 = ggplot(per_recruit,aes(x=age,y=weight)) +
geom_line() +
labs(x="Age (quarter)",y="Weight (kg)")
p3 = ggplot(per_recruit,aes(x=age,y=number*weight)) +
geom_line() +
labs(x="Age (quarter)",y="Yield-per-recruit (kg)")
multiplot(p1,p2,p3)
per_recruit <- per_recruit[-nrow(per_recruit),]
p1 = ggplot(per_recruit,aes(x=age,y=number)) +
geom_line() +
labs(x="Age (quarter)",y="Survival")
p2 = ggplot(per_recruit,aes(x=age,y=weight)) +
geom_line() +
labs(x="Age (quarter)",y="Weight (kg)")
p3 = ggplot(per_recruit,aes(x=age,y=number*weight)) +
geom_line() +
labs(x="Age (quarter)",y="Yield-per-recruit (kg)")
multiplot(p1,p2,p3)
p1 = ggplot(per_recruit,aes(x=age,y=number)) +
geom_line() +
labs(x="Age (quarter)",y="Survival")
p2 = ggplot(per_recruit,aes(x=age,y=length)) +
geom_line() +
labs(x="Age (quarter)",y="Length (cm)")
p3 = ggplot(per_recruit,aes(x=age,y=weight)) +
geom_line() +
labs(x="Age (quarter)",y="Weight (kg)")
p4 = ggplot(per_recruit,aes(x=age,y=number*weight)) +
geom_line() +
labs(x="Age (quarter)",y="Yield-per-recruit (kg)")
multiplot(p1,p2,p3,p4)
par(mfrow=c(4,1),mar=c(0,5,0,0),oma=rep(1,4))
with(per_recruit,{
plot(x=age,y=number,xaxt="n",ylab="Survival")
plot(x=age,y=length,xaxt="n",y="Length (cm)")
plot(x=age,y=weight,xaxt="n",y="Weight (kg)")
plot(x=age,y=number*weight,xaxt="n",y="Yield-per-recruit (kg)")
})
par(mfrow=c(4,1),mar=c(0,5,0,0),oma=c(5,0,1,1))
with(per_recruit,{
plot(x=age,y=number,xaxt="n",ylab="Survival")
plot(x=age,y=length,xaxt="n",ylab="Length (cm)")
plot(x=age,y=weight,xaxt="n",ylab="Weight (kg)")
plot(x=age,y=number*weight,xaxt="n",ylab="Yield-per-recruit (kg)")
axis(side=1,at=seq(0,20,4))
})
par(mfrow=c(4,1),mar=c(0,5,0,0),oma=c(5,0,1,1))
with(per_recruit,{
plot(x=age,y=number,xaxt="n",ylab="Survival",type='l')
plot(x=age,y=length,xaxt="n",ylab="Length (cm)",type='l')
plot(x=age,y=weight,xaxt="n",ylab="Weight (kg)",type='l')
plot(x=age,y=number*weight,xaxt="n",ylab="Yield-per-recruit (kg)",type='l')
axis(side=1,at=seq(0,20,4))
})
par(mfrow=c(4,1),mar=c(0,5,0,0),oma=c(5,0,1,1),las=1)
with(per_recruit,{
plot(x=age,y=number,xaxt="n",ylab="Survival",type='l')
plot(x=age,y=length,xaxt="n",ylab="Length (cm)",type='l')
plot(x=age,y=weight,xaxt="n",ylab="Weight (kg)",type='l')
plot(x=age,y=number*weight,xaxt="n",ylab="Yield-per-recruit (kg)",type='l')
axis(side=1,at=seq(0,20,4))
})
par(mfrow=c(4,1),mar=c(0,5,0,0),oma=c(5,0,1,1),las=1)
with(per_recruit,{
plot(x=age,y=number,xaxt="n",ylab="Survival",type='l')
plot(x=age,y=length,xaxt="n",ylab="Length (cm)",type='l')
plot(x=age,y=weight,xaxt="n",ylab="Weight (kg)",type='l')
plot(x=age,y=number*weight,xaxt="n",ylab="Yield-per-recruit (kg)",type='l')
axis(side=1,at=seq(0,20,4))
mtext("Age (quarters)",size=1,outer=F)
})
par(mfrow=c(4,1),mar=c(0,5,0,0),oma=c(5,0,1,1),las=1)
with(per_recruit,{
plot(x=age,y=number,xaxt="n",ylab="Survival",type='l')
plot(x=age,y=length,xaxt="n",ylab="Length (cm)",type='l')
plot(x=age,y=weight,xaxt="n",ylab="Weight (kg)",type='l')
plot(x=age,y=number*weight,xaxt="n",ylab="Yield-per-recruit (kg)",type='l')
axis(side=1,at=seq(0,20,4))
mtext("Age (quarters)",side=1,outer=F)
})
par(mfrow=c(4,1),mar=c(0,5,0,0),oma=c(5,0,1,1),las=1)
with(per_recruit,{
plot(x=age,y=number,xaxt="n",ylab="Survival",type='l')
plot(x=age,y=length,xaxt="n",ylab="Length (cm)",type='l')
plot(x=age,y=weight,xaxt="n",ylab="Weight (kg)",type='l')
plot(x=age,y=number*weight,xaxt="n",ylab="Yield-per-recruit (kg)",type='l')
axis(side=1,at=seq(0,20,4))
mtext("Age (quarters)",side=1,outer=F,line=3,cex=0.7)
})
par(mfrow=c(4,1),mar=c(0,5,0,0),oma=c(5,0,1,1),las=1)
with(per_recruit,{
plot(x=age,y=number,xaxt="n",ylab="Survival",type='l')
plot(x=age,y=length,xaxt="n",ylab="Length (cm)",type='l')
plot(x=age,y=weight,xaxt="n",ylab="Weight (kg)",type='l')
plot(x=age,y=number*weight,xaxt="n",ylab="Yield-per-recruit (kg)",type='l')
axis(side=1,at=seq(0,20,4))
mtext("Age (quarters)",side=1,outer=F,line=2,cex=0.7)
})
source('../../common.R',local=T)
load(c(
'curve','msy','per_recruit'
),from='../../yield/output')
load(c(
'maturities','selectivities'
),from='../../model/output')
curve
ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=yield/1000,colour="Overall")) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (`000 t, quarterly)")
ggplot(curve,aes(x=status)) +
geom_line(aes(y=yield/1000,colour="Overall")) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Status (B/B0)",y="Yield (`000 t, quarterly)")
p1 = ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=yield/1000,colour="Overall")) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (`000 t, quarterly)",colour="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln,y=yield/1000,colour="Overall")) +
geom_line(aes(x=vuln_w_ps,y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(x=vuln_m_pl,y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(x=vuln_e_gn,y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Status (B/B0)",y="Yield (`000 t, quarterly)",colour="")
multiplot(p1,p2)
p1 = ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=yield/1000/3,colour="Overall")) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (`000 t, quarterly)",colour="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln/3,y=yield/1000/3,colour="Overall")) +
geom_line(aes(x=vuln_w_ps,y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(x=vuln_m_pl,y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(x=vuln_e_gn,y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Status (B/B0)",y="Yield (`000 t, quarterly)",colour="")
multiplot(p1,p2)
p1 = ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (`000 t, quarterly)",colour="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln_w_ps,y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(x=vuln_m_pl,y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(x=vuln_e_gn,y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Status (B/B0)",y="Yield (`000 t, quarterly)",colour="")
multiplot(p1,p2)
p1 = ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (kt, quarterly)",colour="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln_w_ps/1e6,y=catch_w_ps/1000,colour="W-PS")) +
geom_line(aes(x=vuln_m_pl/1e6,y=catch_m_pl/1000,colour="M-PL")) +
geom_line(aes(x=vuln_e_gn/1e6,y=catch_e_gn/1000,colour="E-GN")) +
labs(x="Vulnerable biomass (Mt)",y="Yield (kt, quarterly)",colour="")
multiplot(p1,p2)
p1 = ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (kt, quarterly)",colour="",linetype="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln_w_ps/1e6,y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(x=vuln_m_pl/1e6,y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(x=vuln_e_gn/1e6,y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Vulnerable biomass (Mt)",y="Yield (kt, quarterly)",colour="",linetype="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln_w_ps/1e6,y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(x=vuln_m_pl/1e6,y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(x=vuln_e_gn/1e6,y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Vulnerable biomass (Mt)",colour="",linetype="")
multiplot(p1,p2,p3)
p1 = ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (kt, quarterly)",colour="",linetype="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln_w_ps/1e6,y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(x=vuln_m_pl/1e6,y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(x=vuln_e_gn/1e6,y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Vulnerable biomass (Mt)",y="Yield (kt, quarterly)",colour="",linetype="")
p3 = ggplot(curve) +
geom_line(aes(x=exprate,y=vuln_w_ps/1e6,colour="W-PS",linetype="W-PS")) +
geom_line(aes(x=exprate,y=vuln_m_pl/1e6,colour="M-PL",linetype="M-PL")) +
geom_line(aes(x=exprate,y=vuln_e_gn/1e6,colour="E-GN",linetype="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Vulnerable biomass (Mt)",colour="",linetype="")
multiplot(p1,p2,p3)
# Load in source and output files
source('../../common.R',local=T)
load(c(
'curve','msy','per_recruit'
),from='../../yield/output')
load(c(
'maturities','selectivities'
),from='../../model/output')
# Find B40% etc
points <- NULL
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.3))),])
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.4))),])
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.5))),])
points$level <- c(0.3,0.4,0.5)
# Normalise to per recruit
per_recruit$number <- per_recruit$number/per_recruit$number[1]
# Calculate ypr
per_recruit$ypr <- with(per_recruit,number*weight)
# Remove plus age
per_recruit <- per_recruit[-nrow(per_recruit),]
# Find maximum
ypr_max_age  <- with(per_recruit,age[which.max(ypr)])
ypr_max_length  <- with(per_recruit,length[which.max(ypr)])
p1 = ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (kt, quarterly)",colour="",linetype="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln_w_ps/1e6,y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(x=vuln_m_pl/1e6,y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(x=vuln_e_gn/1e6,y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Vulnerable biomass (Mt)",y="Yield (kt, quarterly)",colour="",linetype="")
p3 = ggplot(curve) +
geom_line(aes(x=exprate,y=vuln_w_ps/1e6,colour="W-PS",linetype="W-PS")) +
geom_line(aes(x=exprate,y=vuln_m_pl/1e6,colour="M-PL",linetype="M-PL")) +
geom_line(aes(x=exprate,y=vuln_e_gn/1e6,colour="E-GN",linetype="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Vulnerable biomass (Mt)",colour="",linetype="")
multiplot(p1,p2,p3)
curve
# Load in source and output files
source('../../common.R',local=T)
load(c(
'curve','msy','per_recruit'
),from='../../yield/output')
load(c(
'maturities','selectivities'
),from='../../model/output')
# Find B40% etc
points <- NULL
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.3))),])
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.4))),])
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.5))),])
points$level <- c(0.3,0.4,0.5)
# Normalise to per recruit
per_recruit$number <- per_recruit$number/per_recruit$number[1]
# Calculate ypr
per_recruit$ypr <- with(per_recruit,number*weight)
# Remove plus age
per_recruit <- per_recruit[-nrow(per_recruit),]
# Find maximum
ypr_max_age  <- with(per_recruit,age[which.max(ypr)])
ypr_max_length  <- with(per_recruit,length[which.max(ypr)])
p1 = ggplot(curve,aes(x=exprate)) +
geom_line(aes(y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Yield (kt, quarterly)",colour="",linetype="")
p2 = ggplot(curve) +
geom_line(aes(x=vuln_w_ps/1e6,y=catch_w_ps/1000,colour="W-PS",linetype="W-PS")) +
geom_line(aes(x=vuln_m_pl/1e6,y=catch_m_pl/1000,colour="M-PL",linetype="M-PL")) +
geom_line(aes(x=vuln_e_gn/1e6,y=catch_e_gn/1000,colour="E-GN",linetype="E-GN")) +
labs(x="Vulnerable biomass (Mt)",y="Yield (kt, quarterly)",colour="",linetype="")
p3 = ggplot(curve) +
geom_line(aes(x=exprate,y=vuln_w_ps/1e6,colour="W-PS",linetype="W-PS")) +
geom_line(aes(x=exprate,y=vuln_m_pl/1e6,colour="M-PL",linetype="M-PL")) +
geom_line(aes(x=exprate,y=vuln_e_gn/1e6,colour="E-GN",linetype="E-GN")) +
labs(x="Exploitation rate (quarterly)",y="Vulnerable biomass (Mt)",colour="",linetype="")
multiplot(p1,p2,p3)
# Load in source and output files
source('../../common.R',local=T)
load(c(
'curve','msy','per_recruit'
),from='../../yield/output')
load(c(
'maturities','selectivities'
),from='../../model/output')
# Find B40% etc
points <- NULL
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.3))),])
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.4))),])
points <- rbind(points,curve[with(curve,which.min(abs(depletion-0.5))),])
points$level <- c(0.3,0.4,0.5)
# Normalise to per recruit
per_recruit$number <- per_recruit$number/per_recruit$number[1]
# Calculate ypr
per_recruit$ypr <- with(per_recruit,number*weight)
# Remove plus age
per_recruit <- per_recruit[-nrow(per_recruit),]
# Find maximum
ypr_max_age  <- with(per_recruit,age[which.max(ypr)])
ypr_max_length  <- with(per_recruit,length[which.max(ypr)])
points
# Load in source and output files
source('../../common.R',local=T)
load(c(
'curve','msy','per_recruit'
),from='../../yield/output')
load(c(
'maturities','selectivities'
),from='../../model/output')
# Find B40% etc
points <- NULL
points <- rbind(points,curve[with(curve,which.min(abs(status-0.3))),])
points <- rbind(points,curve[with(curve,which.min(abs(status-0.4))),])
points <- rbind(points,curve[with(curve,which.min(abs(status-0.5))),])
points$level <- c(0.3,0.4,0.5)
# Normalise to per recruit
per_recruit$number <- per_recruit$number/per_recruit$number[1]
# Calculate ypr
per_recruit$ypr <- with(per_recruit,number*weight)
# Remove plus age
per_recruit <- per_recruit[-nrow(per_recruit),]
# Find maximum
ypr_max_age  <- with(per_recruit,age[which.max(ypr)])
ypr_max_length  <- with(per_recruit,length[which.max(ypr)])
points
